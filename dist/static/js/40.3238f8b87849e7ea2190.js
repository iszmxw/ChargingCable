webpackJsonp([40],{Cd8m:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});a("eqfM");var n=a("/QYm"),e=a("Xxa5"),s=a.n(e),o=a("exGp"),c=a.n(o),r=(a("XmAh"),a("il3B")),d=(a("nI2B"),a("qWG/")),l=(a("k3b4"),a("+2ln")),u=(a("HZGa"),a("pykS")),h=(a("X+8o"),a("iTiM")),_=(a("le1z"),a("hZxG")),v=(a("mMXg"),a("qYlo")),f=a("D6FL"),m=(a("+Jte"),{data:function(){return{jiudian_list:[],showjiudian:!1,daili_list:[],showdaili:!1,name_jd:"请选择酒店",name_dl:"请选择代理",number:"扫码识别设备编号",navradio:"1",jd_id:"",dl_id:"",data:[],type:0}},components:{vanPopup:v.a,vanRadio:_.a,vanArea:h.a,vanRadioGroup:u.a,vanIcon:l.a,vanPicker:d.a},created:function(){this.getdata(),this.getdata1();try{var t=window.location.href;-1!=t.search("number=")&&(this.number=t.split("number=")[1].split("&")[0],this.type=1)}catch(t){}},methods:{showdaili_:function(){var t=this;this.daili_list.length?this.showdaili=!0:r.a.confirm({title:"错误提示",message:"您还未添加任何代理",confirmButtonText:"添加代理",cancelButtonText:"返回",showCancelButton:!0}).then(function(){t.$router.push({path:"/add_daili",query:{one_level:t.$route.query.one_level}})}).catch(function(){})},getdata1:function(){var t=this;return c()(s.a.mark(function i(){var a,n,e;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(f.r)();case 2:a=i.sent,t.data=a.data,0==a.data.hotel_list.length&&r.a.confirm({title:"错误提示",message:"您还未添加任何酒店",confirmButtonText:"添加酒店",cancelButtonText:"返回",showCancelButton:!0}).then(function(){t.$router.push({path:"/add_jiudian"})}).catch(function(){t.$router.push({path:"/sj_zhongxin"})}),n=a.data.hotel_list,e=a.data.distributor_list,n.forEach(function(i){t.jiudian_list.push(i.hotel_name)}),e.forEach(function(i){t.daili_list.push(i.username)});case 9:case"end":return i.stop()}},i,t)}))()},changejd:function(t,i){console.log(t,i,11)},close_jd:function(){this.showjiudian=!1},confirm_jd:function(t,i){this.name_jd=t,this.jd_id=this.data.hotel_list[i].user_id,this.showjiudian=!1},close_dl:function(){this.showdaili=!1},confirm_dl:function(t,i){this.name_dl=t,this.dl_id=this.data.distributor_list[i].user_id,this.showdaili=!1},getsetin:function(){var t=this;if("2"!=this.navradio||this.dl_id)if(this.jd_id&&this.name_jd&&this.number){var i={};i.type=this.navradio,i.number=this.number,i.hotel_name=this.name_jd,i.agent_user_id=this.dl_id,i.hotel_user_id=this.jd_id,Object(f.q)(i).then(function(i){200==i.code?(Object(n.a)(i.data),t.$router.go(-1)):1e4==i.code&&Object(n.a)(i.msg)})}else Object(n.a)("请完善设备绑定信息");else Object(n.a)("请完善设备绑定信息")},saoma:function(){wx.ready(function(){wx.scanQRCode({needResult:0,desc:"scanQRCode desc",scanType:["qrCode","barCode"],success:function(t){}})})},getdata:function(){var t=this;Object(f.Q)().then(function(i){var a=i.data,n={debug:!1,appId:a.appId,timestamp:a.timestamp,nonceStr:a.nonceStr,signature:a.signature,jsApiList:["checkJsApi","scanQRCode","getLocation"]};wx.config(n),wx.ready(function(){wx.getLocation({type:"gcj02",success:function(i){t.wd=i.latitude,t.jd=i.longitude;i.speed,i.accuracy;console.log(i,123)}})}),wx.error(function(t){})})}},mounted:function(){}}),p={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"top"},[a("div",{staticClass:"saoma",on:{click:function(i){return t.saoma()}}},[t._v("必须先扫码识别设备编号")]),t._v(" "),a("div",{staticClass:"info_wrapper",on:{click:function(i){return t.saoma()}}},[t._m(0),t._v(" "),a("div",{staticClass:"weizhi"},[a("span",[t._v(t._s(t.number))])])]),t._v(" "),a("div",{staticClass:"info_wrapper",on:{click:function(i){t.showjiudian=!0}}},[t._m(1),t._v(" "),a("div",{staticClass:"weizhi"},[a("span",[t._v(t._s(t.name_jd))])])]),t._v(" "),5==t.$route.query.level?a("div",{attrs:{id:"nav"}},[a("van-radio-group",{model:{value:t.navradio,callback:function(i){t.navradio=i},expression:"navradio"}},[a("van-radio",{attrs:{name:"1","checked-color":"#15BDDB"}},[t._v("自己")]),t._v(" "),a("van-radio",{attrs:{name:"2","checked-color":"#15BDDB"}},[t._v("团队")])],1)],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"==t.navradio&&5==t.$route.query.level,expression:"navradio=='2'&&$route.query.level==5"}],staticClass:"info_wrapper",on:{click:function(i){return t.showdaili_()}}},[t._m(2),t._v(" "),a("div",{staticClass:"weizhi"},[a("span",[t._v(t._s(t.name_dl))])])]),t._v(" "),a("div",{staticClass:"submit"},[a("button",{staticClass:"btn",on:{click:function(i){return t.getsetin()}}},[t._v("绑定")])]),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.showjiudian,callback:function(i){t.showjiudian=i},expression:"showjiudian"}},[a("van-picker",{attrs:{columns:t.jiudian_list,"show-toolbar":""},on:{cancel:t.close_jd,confirm:t.confirm_jd,change:t.changejd}})],1),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.showdaili,callback:function(i){t.showdaili=i},expression:"showdaili"}},[a("van-picker",{attrs:{columns:t.daili_list,"show-toolbar":""},on:{cancel:t.close_dl,confirm:t.confirm_dl}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"name"},[i("span",[this._v("设备编号")]),this._v(" "),i("span",{staticClass:"red"},[this._v("*")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"name"},[i("span",[this._v("酒店名称")]),this._v(" "),i("span",{staticClass:"red"},[this._v("*")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"name"},[i("span",[this._v("团队")]),this._v(" "),i("span",{staticClass:"red"},[this._v("*")])])}]};var w=a("VU/8")(m,p,!1,function(t){a("i0Kf")},"data-v-33cfd323",null);i.default=w.exports},i0Kf:function(t,i){}});
//# sourceMappingURL=40.3238f8b87849e7ea2190.js.map