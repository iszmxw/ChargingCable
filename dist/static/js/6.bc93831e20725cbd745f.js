webpackJsonp([6,15],{MY4N:function(t,e,n){"use strict";var a=n("nsZj"),s=(n.n(a),n("px3J"));n.n(s)},NzR8:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAMAAADUivDaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVENTM2Njg3NDc5MzExRTk4QjEwRUZCNjVEODdFMkFEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVENTM2Njg4NDc5MzExRTk4QjEwRUZCNjVEODdFMkFEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUQ1MzY2ODU0NzkzMTFFOThCMTBFRkI2NUQ4N0UyQUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUQ1MzY2ODY0NzkzMTFFOThCMTBFRkI2NUQ4N0UyQUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4EdUsFAAAACVBMVEVbW1vu7u4AAADX8FHxAAAAA3RSTlP//wDXyg1BAAABUklEQVR42rSYWRLEIAhEW+5/6KlkYsqlkWUYq/Kj8IJEWQLRRxvGQQwOdQODk/5p5ojQhLV5UMGjdyyE4Tq2jhCAymBZFcdYxBAnrIJIEBZRZAizMFKESRw5wqiAJGFQeREiccaIyBBeLSS3Maghb0TXAzMC6ziaAWIEwBk7qyO2m6e8ldhzq4IZoRH2tRDisQAgiOZC9F1siHYjxEZc+t9nd6gP0S1AGvH6ASTgC5qN0M/F7QyQvAA/4WLYiJmABGKxgfjTQqy7iCM2P4QRuyejCPItkghMdoUQz4HG7JwgYr8XHNEsxOnoXgdcv2Y09pKwZSGsC2Rcdh69KMIXfuniN/DJbwgpQ/hSEVnrqciTEJX0OuRUP0NJywXFQUWJUlAoVZRrFUVjQelaUUBXlPEVzURFS1PRWFW0dxVNZkmrW9FwD02+MfXvnw+xXyAfAQYAcZ0d5dVoQ9UAAAAASUVORK5CYII="},QPNw:function(t,e){},RvvR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("eqfM");var a=n("/QYm"),s=(n("XmAh"),n("il3B")),i=n("Xxa5"),o=n.n(i),c=n("exGp"),r=n.n(c),d=(n("FO5P"),n("woHG")),u=(n("k3b4"),n("+2ln")),l=n("D6FL"),v={components:{"van-icon":u.a,vanNavBar:d.a},data:function(){return{data22:[],is_default:!0}},created:function(){this.getdata()},methods:{emitItem:function(t){this.$hu.$emit("getaddress",t)},getdata:function(){var t=this;return r()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l._7)();case 2:n=e.sent,t.data22=n.data;case 4:case"end":return e.stop()}},e,t)}))()},del:function(t){var e=this;s.a.confirm({title:"提示",message:"删除地址后不可恢复！"}).then(function(){Object(l.g)({id:t});for(var n=e.data22,a=0;a<n.length;a++)n[a].address_id==t&&n.splice(a,1)})},default_:function(t){var e=this;Object(l._5)({id:t}).then(function(){Object(a.a)("默认地址设置成功");for(var n=0;n<e.data.length;n++)if(e.data22[n].address_id==t){var s=e.data22.splice(n,1);e.data22.unshift(s[0]),e.data22[0].is_default=1,e.data22[1].is_default=0}})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"list"},t._l(t.data22,function(e,s){return a("div",{key:s,staticClass:"item flex-between"},[a("div",{staticClass:"left flex_1",on:{click:function(n){return t.emitItem(e)}}},[a("div",{attrs:{id:"column"}},[a("div",{staticClass:"name"},[t._v(t._s(e.consignee))]),t._v(" "),a("div",{staticClass:"phone"},[t._v(t._s(e.mobile))]),t._v(" "),a("span",{staticClass:"default",style:{background:1==e.is_default?"#FF4C23":"#cccccc"},on:{click:function(n){return t.default_(e.address_id)}}},[t._v("默认")])]),t._v(" "),a("div",{staticClass:"address"},[t._v(t._s(e.province)+" "+t._s(e.city)+" "+t._s(e.district?e.district:""))])]),t._v(" "),a("div",{staticClass:"right flex-between"},[a("img",{attrs:{src:n("NzR8"),alt:""},on:{click:function(n){return t.$router.push({path:"/address",query:{data:e}})}}}),t._v(" "),a("img",{attrs:{src:n("tMq/"),alt:""},on:{click:function(n){return t.del(e.address_id)}}})])])}),0),t._v(" "),a("div",{staticClass:"button flex-center",on:{click:function(e){return t.$router.push({path:"/address"})}}},[a("span",[t._v("+")]),t._v("新增地址")])])},staticRenderFns:[]};var _=n("VU/8")(v,p,!1,function(t){n("sa6D")},"data-v-c0afb224",null);e.default=_.exports},XmTH:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("eqfM");var a=n("/QYm"),s=n("Xxa5"),i=n.n(s),o=n("exGp"),c=n.n(o),r=(n("mMXg"),n("qYlo")),d=(n("MY4N"),n("0zAV")),u=(n("OWWB"),n("1fWZ")),l=n("D6FL"),v=n("RvvR"),p={components:{vanCell:u.a,vanField:d.a,vanPopup:r.a,address1:v.default},props:{},data:function(){return{act_cou:-1,show_con:!1,addressShow:!1,isaddress:!1,user_note:"",data22:[],addresinfo:{address_id:""},goodsdata:[],count:0,freight:0,fukuan:!1,userCartCouponList:[],coupon_id:"",cou_title:"点击选用优惠券",cou_money:0}},computed:{total:function(){return Number(this.count)+Number(this.freight)}},created:function(){var t=this;return c()(i.a.mark(function e(){var n,a,s,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$route.query.action){e.next=21;break}return console.log(JSON.parse(t.$route.query.item)),n=JSON.parse(t.$route.query.item),a=[],n.forEach(function(t){a.push(t.id)}),(s={}).action=t.$route.query.action,s.cart_ids=a.join(","),console.log(s),e.next=11,Object(l._8)(s);case 11:for(o=e.sent,console.log(o,886),t.goodsdata=o.data.cartList,t.freight=Number(o.data.freight),c=0;c<o.data.cartList.length;c++)t.count=Number(t.count)+Number(o.data.cartList[c].shop_price)*Number(o.data.cartList[c].goods_num);return(a=o.data.userCartCouponList).forEach(function(e,n){Number(t.count)+Number(t.freight)<e.coupon.condition&&a.splice(n,1)}),t.userCartCouponList=a,console.log(t.userCartCouponList),e.abrupt("return");case 21:try{t.freight=Number(t.$route.query.freight)}catch(t){}return(s={}).action=t.$route.query.action,s.goods_id=t.$route.query.goods_id,s.goods_num=t.$route.query.goods_num,s.item_id=t.$route.query.item_id,console.log(s),e.next=30,Object(l._8)(s);case 30:for(o=e.sent,t.goodsdata=o.data.cartList,a=o.data.userCartCouponList,console.log(o,777,t.userCartCouponList),c=0;c<o.data.cartList.length;c++)t.count=Number(t.count)+Number(Number(o.data.cartList[c].shop_price)*Number(o.data.cartList[c].goods_num));a.forEach(function(e,n){Number(t.count)+Number(t.freight)<e.coupon.condition&&a.splice(n,1)}),t.userCartCouponList=a,console.log(t.userCartCouponList);case 38:case"end":return e.stop()}},e,t)}))()},mounted:function(){var t=this;return c()(i.a.mark(function e(){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l._7)();case 2:n=e.sent,t.data22=n.data,n.data.length&&(t.addresinfo=n.data[0],t.isaddress=!0),(a=t).$hu.$on("getaddress",function(t){a.addressShow=!1,a.isaddress=!0,a.addresinfo=t,console.log(a.addresinfo)});case 7:case"end":return e.stop()}},e,t)}))()},methods:{open_con:function(){0!=this.userCartCouponList.length&&(this.show_con=!0)},close_con:function(){this.show_con=!1},use_con:function(t,e,n,a){this.coupon_id=t,this.act_cou=e,this.show_con=!1,this.cou_title="满"+parseInt(n)+"元可减"+a+"元",this.cou_money=a},submit:function(){var t=this;return c()(i.a.mark(function e(){var n,s,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.addresinfo.address_id){e.next=3;break}return Object(a.a)("请选择收货地址"),e.abrupt("return");case 3:if(!t.fukuan){e.next=6;break}return Object(a.a)("订单已提交..."),e.abrupt("return");case 6:if(t.fukuan=!0,t.$route.query.action){e.next=19;break}return n=JSON.parse(t.$route.query.item),s=[],n.forEach(function(t){s.push(t.id)}),(o={}).action=t.$route.query.action,o.cart_ids=s.join(","),o.user_note=t.user_note,o.address_id=t.addresinfo.address_id,o.coupon_id=t.coupon_id,Object(l.a)(o).then(function(e){200==e.code&&t.onBridgeReady(e)}),e.abrupt("return");case 19:c=t,(o={}).action=t.$route.query.action,o.goods_id=t.$route.query.goods_id,o.goods_num=t.$route.query.goods_num,o.item_id=t.$route.query.item_id,o.user_note=t.user_note,o.address_id=t.addresinfo.address_id,o.coupon_id=t.coupon_id,Object(l.a)(o).then(function(t){200==t.code&&c.onBridgeReady(t)});case 29:case"end":return e.stop()}},e,t)}))()},onBridgeReady:function(t){var e=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.data.appId,timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,package:t.data.package,signType:t.data.signType,paySign:t.data.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg&&e.$router.push({path:"/success"}),"get_brand_wcpay_request:cancel"==t.err_msg&&Object(a.a)("支付失败")})}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"box"}},[a("div",{staticClass:"top"},[t.isaddress?a("div",{staticClass:"res",on:{click:function(e){t.addressShow=!0}}},[a("div",[t._v("收货人："+t._s(t.addresinfo.consignee))]),t._v(" "),a("div",[t._v("收货地址："+t._s(t.addresinfo.province+" "+t.addresinfo.city+" "+t.addresinfo.district))]),t._v(" "),a("div",[t._v("联系方式："+t._s(t.addresinfo.mobile))]),t._v(" "),a("span",{staticClass:"pos"},[t._v("点击切换")])]):a("div",{on:{click:function(e){t.addressShow=!0}}},[a("van-cell",{attrs:{title:"请选择收货地址","is-link":""}})],1)]),t._v(" "),a("img",{attrs:{src:n("incM"),alt:""}}),t._v(" "),t._l(t.goodsdata,function(e,n){return a("div",{key:n,staticClass:"goods"},[a("img",{staticClass:"img",attrs:{src:e.original_img,alt:""}}),t._v(" "),a("div",{staticClass:"right"},[a("p",[t._v(t._s(e.goods_name))]),t._v(" "),a("div",{staticClass:"taocao"},[t._v(t._s(e.spec_key_name))]),t._v(" "),a("p",[a("span",{staticClass:"price"},[t._v("￥"+t._s(e.shop_price)+" ")]),a("span",{staticClass:"num"},[t._v("x"+t._s(e.goods_num))])])])])}),t._v(" "),a("div",{staticClass:"count"},[t._v("小计："),a("span",[t._v("￥"+t._s(t.count.toFixed(2)))])]),t._v(" "),a("div",{staticClass:"beizhu"},[a("van-field",{attrs:{label:"订单备注：",type:"textarea",placeholder:"请输入备注内容",rows:"1",autosize:""},model:{value:t.user_note,callback:function(e){t.user_note=e},expression:"user_note"}})],1),t._v(" "),a("div",{staticClass:"other"},[a("van-cell",{attrs:{title:"运费"}},[a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.freight>0?"+￥"+t.freight:"免运费"))])]),t._v(" "),a("van-cell",{attrs:{title:"优惠券"},on:{click:function(e){return t.open_con()}}},[a("span",{staticStyle:{color:"red"}},[t._v(t._s(0==t.userCartCouponList.length?"无可用优惠券":t.cou_title))])])],1),t._v(" "),a("div",{staticClass:"bottom"},[a("p",[t._v("合计："),a("span",{staticStyle:{color:"#FE7250","font-weight":"600"}},[t._v("￥"+t._s((Number(t.count)+t.freight-Number(t.cou_money)).toFixed(2)))])]),t._v(" "),a("button",{staticClass:"submit acthu",on:{click:function(e){return t.submit()}}},[t._v("去付款")])]),t._v(" "),a("van-popup",{staticClass:"address_popup",staticStyle:{width:"100%",height:"100%"},attrs:{position:"right",overlay:!1},model:{value:t.addressShow,callback:function(e){t.addressShow=e},expression:"addressShow"}},[a("address1")],1),t._v(" "),a("van-popup",{staticStyle:{width:"100%",height:"50%"},attrs:{position:"bottom"},model:{value:t.show_con,callback:function(e){t.show_con=e},expression:"show_con"}},[a("div",{staticClass:"con_title"},[a("span",[t._v("请点击使用优惠券")]),t._v(" "),a("span",{on:{click:function(e){return t.close_con()}}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"coupons_list"},t._l(t.userCartCouponList,function(e,n){return a("div",{key:n,staticClass:"coupon_item",class:t.act_cou==n?"active_cou":"",on:{click:function(a){return t.use_con(e.coupon.id,n,e.coupon.condition,e.coupon.money)}}},[a("div",{staticClass:"top1"},[a("div",{staticClass:"icon"},[t._v(t._s(e.coupon.use_type_title?e.coupon.use_type_title:"商品券"))])]),t._v(" "),a("div",{staticClass:"price cl"},[a("div",{staticClass:"num"},[a("strong",{staticStyle:{"font-size":"16px"}},[t._v("¥")]),t._v(" "+t._s(e.coupon.money))]),t._v(" "),a("span",[t._v(t._s("满"+parseInt(e.coupon.condition)+"元可减"+e.coupon.money+"元"))])]),t._v(" "),a("div",{staticClass:"content cl"},[a("h3",[t._v(t._s(e.coupon.name))]),t._v(" "),a("p",[t._v("有效期至 "+t._s(e.coupon.use_end_time))])])])}),0)])],2)},staticRenderFns:[]};var A=n("VU/8")(p,_,!1,function(t){n("QPNw")},"data-v-12e9ffac",null);e.default=A.exports},incM:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXcAAAAECAYAAAB1AX8lAAABKUlEQVRYR+2VsU4CQRRF7zXIEhsSW2tKOxMqEkviD5jwA1ZiWAv9BCxYBSq/AL7AUJJQkdhRWlhZExoQ3XgtTChsdsjsbqK8aefO5OS8N2+oKBSyWETEVnTtcvXjs8rr+H0i6Ngln0qGiK6qB058at+UUfycAMiVz/x5VNr6z0MeAPP35/0xm+HOIVqdBonEj6P39BJ8HR6NCJz62dzmNIfNaqlBMpFPvcsAcWEEMFc+87dNPX9nrf987AHm7z/4y2C4a4zXuM5+f50kSBK709WAwHlSNq19CeO9+Vu9eVZx4APxEA6g/PgA8+dXa/Nn/n4MSLv9ftMe7jN87Nd4e7dwabDudNmBELpk08gQnAWFUu3ihE58ug9z5QNg/vwKbf7M38bArr/fby8ERkyKJgz+AAAAAElFTkSuQmCC"},sa6D:function(t,e){},"tMq/":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAMAAADUivDaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVFRjUwRUI1NDc5MzExRTlCN0ZDQUYxOTBCQ0Y5MkIyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVFRjUwRUI2NDc5MzExRTlCN0ZDQUYxOTBCQ0Y5MkIyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUVGNTBFQjM0NzkzMTFFOUI3RkNBRjE5MEJDRjkyQjIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUVGNTBFQjQ0NzkzMTFFOUI3RkNBRjE5MEJDRjkyQjIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4xlWQCAAAACVBMVEVbW1vu7u4AAADX8FHxAAAAA3RSTlP//wDXyg1BAAABJklEQVR42uyYzRKDMAiEN7z/Q9v61xiBAG4PnSmHHCL7DaQ2gBDbWmeOGwLyCQae3ttxEZaztQ/V0T2dGWJydNpzpACqD4anErDBDXnC6IgCYXBFhXB1RolwcUeN0AtQJHSSEyGSZ/SICuFUoZhGJ0M9iEOHehCHEF4QOM0LA14QmDFWKZQg4JgShoIA4owN0e4I58LHPRNoecQRYiFyh6EgMse5IvSfVEtGTfAlh1GhEK98LkJbcoh9wb48QMgf8XuI9gTxfsFlioCPkADi+r7nEJG/2Y5odcR28YmOiNw35g1uMsRBFOvhpxTJEwSvLBOaA0aLQmiUGO0ao2kktK6MBprRxjOGCcZIwxisGOMdY8ikjLqMgbsb8idb3/74kPsEsggwAN9FHeWKAoxbAAAAAElFTkSuQmCC"}});
//# sourceMappingURL=6.bc93831e20725cbd745f.js.map