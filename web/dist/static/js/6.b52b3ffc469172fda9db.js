webpackJsonp([6],{"3UG7":function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n={title:String,loading:Boolean,showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,visibleItemCount:{type:Number,default:5},itemHeight:{type:Number,default:44}}},"3X7g":function(t,e,i){"use strict";(function(t){e.a=function(t){r(function(){r(t)})};var n=i("o69Z"),s=Date.now();var a=n.f?t:window,o=a.requestAnimationFrame||function(t){var e=Date.now(),i=Math.max(0,16-(e-s)),n=setTimeout(t,i);return s=e+i,n};a.cancelAnimationFrame||a.clearTimeout;function r(t){return o.call(a,t)}}).call(e,i("DuR2"))},"54I1":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("FO5P");var n=i("woHG"),s=(i("nsZj"),i("nOtf"),i("hW8u"),i("JsOw"),i("W0KU"),i("CGQl"),i("kXkE"),i("RfZZ")),a=i("o69Z");function o(t){return Array.isArray(t)?t:[t]}function r(t,e){return new Promise(function(i){var n=new FileReader;n.onload=function(t){i(t.target.result)},"dataUrl"===e?n.readAsDataURL(t):"text"===e&&n.readAsText(t)})}var c=["jpeg","jpg","gif","png","svg"];function u(t){return t.file&&t.file.type?0===t.file.type.indexOf("image"):t.url?(e=t.url,c.some(function(t){return-1!==e.indexOf("."+t)})):!!t.content&&0===t.content.indexOf("data:image");var e}var h=i("+2ln"),l=i("Wtz3"),f=i("7+uW"),m=i("AA6R"),d=i.n(m),p=i("joY4"),v=i("RP/J"),g=i("CsZI"),b=i("vwLT"),w=i("Xx0f"),y=i("7ZPY"),x=i("rD0v"),C=Object(a.b)("image-preview"),S=C[0],T=C[1];function O(t){return Math.sqrt(Math.abs((t[0].clientX-t[1].clientX)*(t[0].clientY-t[1].clientY)))}var I,M=S({mixins:[g.a,b.a,w.a],props:{className:null,lazyLoad:Boolean,asyncClose:Boolean,showIndicators:Boolean,images:{type:Array,default:function(){return[]}},loop:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},startPosition:{type:Number,default:0},minZoom:{type:Number,default:1/3},maxZoom:{type:Number,default:3},overlayClass:{type:String,default:T("overlay")},closeOnClickOverlay:{type:Boolean,default:!0}},data:function(){return this.bindStatus=!1,{scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,active:0,doubleClickTimer:null}},computed:{imageStyle:function(){var t=this.scale,e={transition:this.zooming||this.moving?"":".3s all"};return 1!==t&&(e.transform="scale3d("+t+", "+t+", 1) translate("+this.moveX/t+"px, "+this.moveY/t+"px)"),e}},watch:{value:function(){this.active=this.startPosition},startPosition:function(t){this.active=t}},methods:{onWrapperTouchStart:function(){this.touchStartTime=new Date},onWrapperTouchEnd:function(t){var e=this;Object(v.c)(t);var i=new Date-this.touchStartTime,n=this.$refs.swipe||{},s=n.offsetX,a=void 0===s?0:s,o=n.offsetY;i<300&&a<10&&(void 0===o?0:o)<10&&(this.doubleClickTimer?(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=null,this.toggleScale()):this.doubleClickTimer=setTimeout(function(){var t=e.active;e.resetScale(),e.$emit("close",{index:t,url:e.images[t]}),e.asyncClose||e.$emit("input",!1),e.doubleClickTimer=null},300))},startMove:function(t){var e=t.currentTarget.getBoundingClientRect(),i=window.innerWidth,n=window.innerHeight;this.touchStart(t),this.moving=!0,this.startMoveX=this.moveX,this.startMoveY=this.moveY,this.maxMoveX=Math.max(0,(e.width-i)/2),this.maxMoveY=Math.max(0,(e.height-n)/2)},startZoom:function(t){this.moving=!1,this.zooming=!0,this.startScale=this.scale,this.startDistance=O(t.touches)},onImageTouchStart:function(t){var e=t.touches,i=(this.$refs.swipe||{}).offsetX,n=void 0===i?0:i;1===e.length&&1!==this.scale?this.startMove(t):2!==e.length||n||this.startZoom(t)},onImageTouchMove:function(t){var e=t.touches;if((this.moving||this.zooming)&&Object(v.c)(t,!0),this.moving){this.touchMove(t);var i=this.deltaX+this.startMoveX,n=this.deltaY+this.startMoveY;this.moveX=Object(p.a)(i,-this.maxMoveX,this.maxMoveX),this.moveY=Object(p.a)(n,-this.maxMoveY,this.maxMoveY)}if(this.zooming&&2===e.length){var s=O(e),a=this.startScale*s/this.startDistance;this.scale=Object(p.a)(a,this.minZoom,this.maxZoom)}},onImageTouchEnd:function(t){if(this.moving||this.zooming){var e=!0;this.moving&&this.startMoveX===this.moveX&&this.startMoveY===this.moveY&&(e=!1),t.touches.length||(this.moving=!1,this.zooming=!1,this.startMoveX=0,this.startMoveY=0,this.startScale=1,this.scale<1&&this.resetScale()),e&&Object(v.c)(t,!0)}},onSwipeChange:function(t){this.resetScale(),this.active=t,this.$emit("change",t)},resetScale:function(){this.scale=1,this.moveX=0,this.moveY=0},toggleScale:function(){var t=this.scale>1?1:2;this.scale=t,this.moveX=0,this.moveY=0}},render:function(t){var e=this;if(this.value){var i=this.active,n=this.images,s=this.showIndex&&t("div",{class:T("index")},[this.slots("index")||i+1+"/"+n.length]),a=t(y.a,{ref:"swipe",attrs:{loop:this.loop,indicatorColor:"white",initialSwipe:this.startPosition,showIndicators:this.showIndicators},on:{change:this.onSwipeChange}},[n.map(function(n,s){var a={class:T("image"),style:s===i?e.imageStyle:null,on:{touchstart:e.onImageTouchStart,touchmove:e.onImageTouchMove,touchend:e.onImageTouchEnd,touchcancel:e.onImageTouchEnd}};return t(x.a,[e.lazyLoad?t("img",d()([{directives:[{name:"lazy",value:n}]},a])):t("img",d()([{attrs:{src:n}},a]))])})]);return t("transition",{attrs:{name:"van-fade"}},[t("div",{class:[T(),this.className],on:{touchstart:this.onWrapperTouchStart,touchMove:v.c,touchend:this.onWrapperTouchEnd,touchcancel:this.onWrapperTouchEnd}},[s,a])])}}}),j={images:[],loop:!0,value:!0,minZoom:1/3,maxZoom:3,className:"",lazyLoad:!1,showIndex:!0,asyncClose:!1,startPosition:0,showIndicators:!1,closeOnPopstate:!1},k=function(t,e){if(void 0===e&&(e=0),!a.f){I||(I=new(f.a.extend(M))({el:document.createElement("div")}),document.body.appendChild(I.$el),I.$on("change",function(t){I.onChange&&I.onChange(t)}));var i=Array.isArray(t)?{images:t,startPosition:e}:t;return Object(s.a)(I,j,i),I.$once("input",function(t){I.value=t}),i.onClose&&I.$once("close",i.onClose),I}};k.install=function(){f.a.use(M)};var D=k,$=Object(a.b)("uploader"),_=$[0],z=$[1],N=_({inheritAttrs:!1,model:{prop:"fileList"},props:{disabled:Boolean,uploadText:String,afterRead:Function,beforeRead:Function,previewSize:[Number,String],name:{type:[Number,String],default:""},accept:{type:String,default:"image/*"},fileList:{type:Array,default:function(){return[]}},maxSize:{type:Number,default:Number.MAX_VALUE},maxCount:{type:Number,default:Number.MAX_VALUE},previewImage:{type:Boolean,default:!0},resultType:{type:String,default:"dataUrl"}},computed:{detail:function(){return{name:this.name}},previewSizeWithUnit:function(){return Object(a.a)(this.previewSize)}},methods:{onChange:function(t){var e=this,i=t.target.files;if(!this.disabled&&i.length){if(i=1===i.length?i[0]:[].slice.call(i),this.beforeRead){var n=this.beforeRead(i,this.detail);if(!n)return void this.resetInput();if(n.then)return void n.then(function(){e.readFile(i)}).catch(this.resetInput)}this.readFile(i)}},readFile:function(t){var e=this,i=function(t,e){return o(t).some(function(t){return t.size>e})}(t,this.maxSize);if(Array.isArray(t)){var n=this.maxCount-this.fileList.length;t.length>n&&(t=t.slice(0,n)),Promise.all(t.map(function(t){return r(t,e.resultType)})).then(function(n){var s=t.map(function(t,e){return{file:t,content:n[e]}});e.onAfterRead(s,i)})}else r(t,this.resultType).then(function(n){e.onAfterRead({file:t,content:n},i)})},onAfterRead:function(t,e){e?this.$emit("oversize",t,this.detail):(this.resetInput(),this.$emit("input",[].concat(this.fileList,o(t))),this.afterRead&&this.afterRead(t,this.detail))},onDelete:function(t,e){var i=this.fileList.slice(0);i.splice(e,1),this.$emit("input",i),this.$emit("delete",t)},resetInput:function(){this.$refs.input&&(this.$refs.input.value="")},onPreviewImage:function(t){var e=this.fileList.filter(function(t){return u(t)}).map(function(t){return t.content||t.url});D({images:e,startPosition:e.indexOf(t.content||t.url)})},renderPreview:function(){var t=this,e=this.$createElement;if(this.previewImage)return this.fileList.map(function(i,n){return e("div",{class:z("preview")},[u(i)?e(l.a,{attrs:{fit:"cover",src:i.content||i.url,width:t.previewSize,height:t.previewSize},class:z("preview-image"),on:{click:function(){t.onPreviewImage(i)}}}):e("div",{class:z("file"),style:{width:t.previewSizeWithUnit,height:t.previewSizeWithUnit}},[e(h.a,{class:z("file-icon"),attrs:{name:"description"}}),e("div",{class:[z("file-name"),"van-ellipsis"]},[i.file?i.file.name:i.url])]),e(h.a,{attrs:{name:"delete"},class:z("preview-delete"),on:{click:function(){t.onDelete(i,n)}}})])})},renderUpload:function(){var t=this.$createElement;if(!(this.fileList.length>=this.maxCount)){var e,i=this.slots(),n=t("input",{attrs:Object(s.a)({},this.$attrs,{type:"file",accept:this.accept,disabled:this.disabled}),ref:"input",class:z("input"),on:{change:this.onChange}});if(i)return t("div",{class:z("input-wrapper")},[i,n]);if(this.previewSize){var a=this.previewSizeWithUnit;e={width:a,height:a}}return t("div",{class:z("upload"),style:e},[t(h.a,{attrs:{name:"plus"},class:z("upload-icon")}),this.uploadText&&t("span",{class:z("upload-text")},[this.uploadText]),n])}}},render:function(t){return t("div",{class:z()},[t("div",{class:z("wrapper")},[this.renderPreview(),this.renderUpload()])])}}),Y=(i("5Hoj"),i("YNA3")),V=i("qWG/"),P=i("3UG7");function H(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())}function A(t){if(t){for(;isNaN(parseInt(t,10));)t=t.slice(1);return parseInt(t,10)}}function E(t,e){return 32-new Date(t,e-1,32).getDate()}var X=Object(a.b)("datetime-picker"),B=X[0],R=X[1],Z=(new Date).getFullYear(),L=B({props:Object(s.a)({},P.a,{value:null,filter:Function,minHour:{type:Number,default:0},minMinute:{type:Number,default:0},type:{type:String,default:"datetime"},showToolbar:{type:Boolean,default:!0},format:{type:String,default:"YYYY.MM.DD HH时 mm分"},formatter:{type:Function,default:function(t,e){return e}},minDate:{type:Date,default:function(){return new Date(Z-10,0,1)},validator:H},maxDate:{type:Date,default:function(){return new Date(Z+10,11,31)},validator:H},maxHour:{type:Number,default:23},maxMinute:{type:Number,default:59}}),data:function(){return{innerValue:this.correctValue(this.value)}},watch:{value:function(t){t=this.correctValue(t),("time"===this.type?t===this.innerValue:t.valueOf()===this.innerValue.valueOf())||(this.innerValue=t,"time"===this.type&&this.updateColumnValue(t))},innerValue:function(t){this.$emit("input",t)},columns:function(){this.updateColumnValue(this.innerValue)}},computed:{ranges:function(){if("time"===this.type)return[{type:"hour",range:[this.minHour,this.maxHour]},{type:"minute",range:[this.minMinute,this.maxMinute]}];var t=this.getBoundary("max",this.innerValue),e=t.maxYear,i=t.maxDate,n=t.maxMonth,s=t.maxHour,a=t.maxMinute,o=this.getBoundary("min",this.innerValue),r=o.minYear,c=o.minDate,u=[{type:"year",range:[r,e]},{type:"month",range:[o.minMonth,n]},{type:"day",range:[c,i]},{type:"hour",range:[o.minHour,s]},{type:"minute",range:[o.minMinute,a]}];return"date"===this.type&&u.splice(3,2),"year-month"===this.type&&u.splice(2,3),u},columns:function(){var t=this;return this.ranges.map(function(e){var i=e.type,n=e.range,s=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(n[1]-n[0]+1,function(e){var s=Object(Y.b)(n[0]+e);return t.formatter(i,s)});return t.filter&&(s=t.filter(i,s)),{values:s}})}},mounted:function(){this.updateColumnValue(this.innerValue)},methods:{correctValue:function(t){var e="time"!==this.type;if(e&&!H(t)?t=this.minDate:t||(t=Object(Y.b)(this.minHour)+":00"),!e){var i=t.split(":"),n=i[0],s=i[1];return(n=Object(Y.b)(Object(p.a)(n,this.minHour,this.maxHour)))+":"+(s=Object(Y.b)(Object(p.a)(s,this.minMinute,this.maxMinute)))}return t=Math.max(t,this.minDate.getTime()),t=Math.min(t,this.maxDate.getTime()),new Date(t)},getBoundary:function(t,e){var i,n=this[t+"Date"],s=n.getFullYear(),a=1,o=1,r=0,c=0;return"max"===t&&(a=12,o=E(e.getFullYear(),e.getMonth()+1),r=23,c=59),e.getFullYear()===s&&(a=n.getMonth()+1,e.getMonth()+1===a&&(o=n.getDate(),e.getDate()===o&&(r=n.getHours(),e.getHours()===r&&(c=n.getMinutes())))),(i={})[t+"Year"]=s,i[t+"Month"]=a,i[t+"Date"]=o,i[t+"Hour"]=r,i[t+"Minute"]=c,i},onConfirm:function(){this.$emit("confirm",this.innerValue)},onChange:function(t){var e,i=this;if("time"===this.type)e=t.getValues().join(":");else{var n=t.getValues(),s=A(n[0]),a=A(n[1]),o=E(s,a),r=A(n[2]);"year-month"===this.type&&(r=1),r=r>o?o:r;var c=0,u=0;"datetime"===this.type&&(c=A(n[3]),u=A(n[4])),e=new Date(s,a-1,r,c,u)}this.innerValue=this.correctValue(e),this.$nextTick(function(){i.$nextTick(function(){i.$emit("change",t)})})},updateColumnValue:function(t){var e=this,i=[],n=this.formatter;if("time"===this.type){var s=t.split(":");i=[n("hour",s[0]),n("minute",s[1])]}else i=[n("year",""+t.getFullYear()),n("month",Object(Y.b)(t.getMonth()+1)),n("day",Object(Y.b)(t.getDate()))],"datetime"===this.type&&i.push(n("hour",Object(Y.b)(t.getHours())),n("minute",Object(Y.b)(t.getMinutes()))),"year-month"===this.type&&(i=i.slice(0,2));this.$nextTick(function(){e.$refs.picker.setValues(i)})}},render:function(t){var e=this,i={};return Object.keys(P.a).forEach(function(t){i[t]=e[t]}),t(V.a,{class:R(),ref:"picker",attrs:{columns:this.columns},on:{change:this.onChange,confirm:this.onConfirm,cancel:function(){e.$emit("cancel")}},props:Object(s.a)({},i)})}}),W=(i("mMXg"),i("qYlo")),U=(i("k3b4"),i("mtWM")),F=i.n(U),G=i("c2Ch"),J={components:{"van-icon":h.a,"van-popup":W.a,"van-datetime-picker":L,"van-uploader":N,vanNavBar:n.a},data:function(){return{show:!1,mod:"",attribute:"",sexShow:!1,timeShow:!1,user:{photo:null},actions:[{name:"男",sex:1},{name:"女",sex:2}],currentDate:new Date,data:[]}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=new URLSearchParams;e.append("openid",localStorage.getItem("openid")),F.a.post(G.a.userInfo,e).then(function(e){t.data=e.data.data})},popup:function(t,e){this.show=!0,this.mod=e,this.attribute=t},submit:function(){var t=this;switch(this.data[this.attribute]=this.mod,this.attribute){case"nickname":userinfo({nickname:this.mod}).then(function(){t.show=!1});break;case"email":userinfo({email:this.mod}).then(function(){t.show=!1});break;case"mobile":userinfo({mobile:this.mod}).then(function(){t.show=!1})}},onSelect:function(t){var e=this;userinfo({sex:t.sex}).then(function(){e.data.sex=t.sex,e.sexShow=!1})},onConfirm:function(t){var e=this,i=new Date(t.getTime()).toLocaleString().split(" ")[0].replace(/\//g,"-"),n=new URLSearchParams;n.append("openid",localStorage.getItem("openid")),n.append("birthday",i),F.a.post(G.a.changeUserInfo,n).then(function(){e.data.birthday=i,e.timeShow=!1})},onReads:function(t){var e=this,i=new FormData;i.append("return_imgs",t.file),i.append("token",this.$store.state.userInfo.token),console.log(i,t),this.$upImg(i).then(function(i){e.data.head_pic=t.content,userinfo({head_pic:i.data.imgpath}).then(function(t){})})}}},K={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"box"}},[i("div",{staticClass:"wrap"},[i("div",{staticClass:"item flex-between head"},[i("div",{staticClass:"title"},[t._v("头像")]),t._v(" "),i("van-uploader",{attrs:{"after-read":t.onReads,accept:"image/*"}},[i("img",{staticClass:"upload img",attrs:{src:t.data.head_pic}})])],1),t._v(" "),i("div",{staticClass:"item flex-between",on:{click:function(e){return t.popup("nickname",t.data.nickname)}}},[i("div",{staticClass:"title"},[t._v("用户名")]),t._v(" "),i("div",{staticClass:"right flex-center-y"},[i("span",[t._v(t._s(t.data.nickname))]),t._v(" "),i("van-icon",{staticClass:"arrow",attrs:{name:"arrow"}})],1)]),t._v(" "),i("div",{staticClass:"item flex-between",on:{click:function(e){t.sexShow=!0}}},[i("div",{staticClass:"title"},[t._v("性别")]),t._v(" "),i("div",{staticClass:"right flex-center-y"},[i("span",[t._v(t._s(1===t.data.sex?"男":"女"))]),t._v(" "),i("van-icon",{staticClass:"arrow",attrs:{name:"arrow"}})],1)]),t._v(" "),i("div",{staticClass:"item flex-between",on:{click:function(e){t.timeShow=!0}}},[i("div",{staticClass:"title"},[t._v("生日")]),t._v(" "),i("div",{staticClass:"right flex-center-y"},[i("span",[t._v(t._s(t.data.birthday))]),t._v(" "),i("van-icon",{staticClass:"arrow",attrs:{name:"arrow"}})],1)]),t._v(" "),i("div",{staticClass:"item flex-between",on:{click:function(e){return t.popup("mobile",t.data.mobile)}}},[i("div",{staticClass:"title"},[t._v("手机")]),t._v(" "),i("div",{staticClass:"right flex-center-y"},[i("span",[t._v(t._s(t.data.mobile))]),t._v(" "),i("van-icon",{staticClass:"arrow",attrs:{name:"arrow"}})],1)]),t._v(" "),i("div",{staticClass:"item flex-between",on:{click:function(e){return t.popup("email",t.data.email)}}},[i("div",{staticClass:"title"},[t._v("邮箱")]),t._v(" "),i("div",{staticClass:"right flex-center-y"},[i("span",[t._v(t._s(t.data.email))]),t._v(" "),i("van-icon",{staticClass:"arrow",attrs:{name:"arrow"}})],1)])]),t._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",{staticClass:"popup",staticStyle:{width:"100%"}},[i("van-icon",{staticClass:"cross",attrs:{name:"cross"},on:{click:function(e){t.show=!1}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.mod,expression:"mod"}],attrs:{type:"text",placeholder:"请输入正确的格式"},domProps:{value:t.mod},on:{input:function(e){e.target.composing||(t.mod=e.target.value)}}}),t._v(" "),i("div",{staticClass:"button flex-center",on:{click:t.submit}},[t._v("确认修改")])],1)]),t._v(" "),i("van-popup",{staticStyle:{width:"100%"},attrs:{position:"bottom"},model:{value:t.timeShow,callback:function(e){t.timeShow=e},expression:"timeShow"}},[i("van-datetime-picker",{attrs:{type:"date","min-date":new Date(1900,1,1),"max-date":new Date},on:{cancel:function(e){t.timeShow=!1},confirm:t.onConfirm},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1)},staticRenderFns:[]};var q=i("VU/8")(J,K,!1,function(t){i("ZAtN")},"data-v-346d6164",null);e.default=q.exports},"5Hoj":function(t,e){},"7ZPY":function(t,e,i){"use strict";var n=i("o69Z"),s=i("RP/J"),a=i("vwLT"),o=i("5Fm4"),r=i("3X7g"),c=i("joY4"),u=Object(n.b)("swipe"),h=u[0],l=u[1];e.a=h({mixins:[a.a,Object(o.a)(function(t,e){t(window,"resize",this.onResize,!0),e?this.initialize():this.clear()})],props:{width:Number,height:Number,autoplay:Number,vertical:Boolean,indicatorColor:String,loop:{type:Boolean,default:!0},duration:{type:Number,default:500},touchable:{type:Boolean,default:!0},initialSwipe:{type:Number,default:0},showIndicators:{type:Boolean,default:!0}},data:function(){return{computedWidth:0,computedHeight:0,offset:0,active:0,deltaX:0,deltaY:0,swipes:[],swiping:!1}},watch:{swipes:function(){this.initialize()},initialSwipe:function(){this.initialize()},autoplay:function(t){t?this.autoPlay():this.clear()}},computed:{count:function(){return this.swipes.length},delta:function(){return this.vertical?this.deltaY:this.deltaX},size:function(){return this[this.vertical?"computedHeight":"computedWidth"]},trackSize:function(){return this.count*this.size},activeIndicator:function(){return(this.active+this.count)%this.count},isCorrectDirection:function(){var t=this.vertical?"vertical":"horizontal";return this.direction===t},trackStyle:function(){var t,e=this.vertical?"height":"width",i=this.vertical?"width":"height";return(t={})[e]=this.trackSize+"px",t[i]=this[i]?this[i]+"px":"",t.transitionDuration=(this.swiping?0:this.duration)+"ms",t.transform="translate"+(this.vertical?"Y":"X")+"("+this.offset+"px)",t},indicatorStyle:function(){return{backgroundColor:this.indicatorColor}},minOffset:function(){var t=this.$el.getBoundingClientRect();return(this.vertical?t.height:t.width)-this.size*this.count}},methods:{initialize:function(t){if(void 0===t&&(t=this.initialSwipe),clearTimeout(this.timer),this.$el){var e=this.$el.getBoundingClientRect();this.computedWidth=this.width||e.width,this.computedHeight=this.height||e.height}this.swiping=!0,this.active=t,this.offset=this.count>1?-this.size*this.active:0,this.swipes.forEach(function(t){t.offset=0}),this.autoPlay()},onResize:function(){this.initialize(this.activeIndicator)},onTouchStart:function(t){this.touchable&&(this.clear(),this.swiping=!0,this.touchStart(t),this.correctPosition())},onTouchMove:function(t){this.touchable&&this.swiping&&(this.touchMove(t),this.isCorrectDirection&&(Object(s.c)(t,!0),this.move({offset:this.delta})))},onTouchEnd:function(){if(this.touchable&&this.swiping){if(this.delta&&this.isCorrectDirection){var t=this.vertical?this.offsetY:this.offsetX;this.move({pace:t>0?this.delta>0?-1:1:0,emitChange:!0})}this.swiping=!1,this.autoPlay()}},getTargetActive:function(t){var e=this.active,i=this.count;return t?this.loop?Object(c.a)(e+t,-1,i):Object(c.a)(e+t,0,i-1):e},getTargetOffset:function(t,e){var i=t*this.size;this.loop||(i=Math.min(i,-this.minOffset));var n=Math.round(e-i);return this.loop||(n=Object(c.a)(n,this.minOffset,0)),n},move:function(t){var e=t.pace,i=void 0===e?0:e,n=t.offset,s=void 0===n?0:n,a=t.emitChange,o=this.loop,r=this.count,c=this.active,u=this.swipes,h=this.trackSize,l=this.minOffset;if(!(r<=1)){var f=this.getTargetActive(i),m=this.getTargetOffset(f,s);if(o){if(u[0]){var d=m<l;u[0].offset=d?h:0}if(u[r-1]){var p=m>0;u[r-1].offset=p?-h:0}}this.active=f,this.offset=m,a&&f!==c&&this.$emit("change",this.activeIndicator)}},swipeTo:function(t,e){var i=this;void 0===e&&(e={}),this.swiping=!0,this.resetTouchStatus(),this.correctPosition(),Object(r.a)(function(){i.move({pace:t%i.count-i.active,emitChange:!0}),e.immediate?Object(r.a)(function(){i.swiping=!1}):i.swiping=!1})},correctPosition:function(){this.active<=-1&&this.move({pace:this.count}),this.active>=this.count&&this.move({pace:-this.count})},clear:function(){clearTimeout(this.timer)},autoPlay:function(){var t=this,e=this.autoplay;e&&this.count>1&&(this.clear(),this.timer=setTimeout(function(){t.swiping=!0,t.resetTouchStatus(),t.correctPosition(),Object(r.a)(function(){t.swiping=!1,t.move({pace:1,emitChange:!0}),t.autoPlay()})},e))},renderIndicator:function(){var t=this,e=this.$createElement,i=this.count,n=this.activeIndicator,s=this.slots("indicator");return s||(this.showIndicators&&i>1?e("div",{class:l("indicators",{vertical:this.vertical})},[Array.apply(void 0,Array(i)).map(function(i,s){return e("i",{class:l("indicator",{active:s===n}),style:s===n?t.indicatorStyle:null})})]):void 0)}},render:function(t){return t("div",{class:l()},[t("div",{ref:"track",style:this.trackStyle,class:l("track"),on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[this.slots()]),this.renderIndicator()])}})},CGQl:function(t,e){},JsOw:function(t,e){},W0KU:function(t,e){},ZAtN:function(t,e){},kXkE:function(t,e){},"qWG/":function(t,e,i){"use strict";var n=i("RfZZ"),s=i("o69Z"),a=i("RP/J"),o=i("54/E");function r(t){return Array.isArray(t)?t.map(function(t){return r(t)}):"object"==typeof t?Object(o.a)({},t):t}var c=i("3UG7"),u=i("LmuL"),h=i("pIDD"),l=i("joY4"),f=i("vwLT"),m=Object(s.b)("picker-column"),d=m[0],p=m[1];function v(t){return Object(s.e)(t)&&t.disabled}var g=d({mixins:[f.a],props:{valueKey:String,className:String,itemHeight:Number,defaultIndex:Number,visibleItemCount:Number,initialOptions:{type:Array,default:function(){return[]}}},data:function(){return{offset:0,duration:0,options:r(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1)},watch:{defaultIndex:function(){this.setIndex(this.defaultIndex)}},computed:{count:function(){return this.options.length}},methods:{onTouchStart:function(t){if(this.touchStart(t),this.moving){var e=function(t){var e=window.getComputedStyle(t),i=e.transform||e.webkitTransform,n=i.slice(7,i.length-1).split(", ")[5];return Number(n)}(this.$refs.wrapper);this.startOffset=Math.min(0,e)}else this.startOffset=this.offset;this.duration=0,this.moving=!1,this.transitionEndTrigger=null,this.touchStartTime=Date.now(),this.momentumOffset=this.startOffset},onTouchMove:function(t){Object(a.c)(t),this.moving=!0,this.touchMove(t),this.offset=Object(l.a)(this.startOffset+this.deltaY,-this.count*this.itemHeight,this.itemHeight);var e=Date.now();e-this.touchStartTime>300&&(this.touchStartTime=e,this.momentumOffset=this.offset)},onTouchEnd:function(){var t=this.offset-this.momentumOffset,e=Date.now()-this.touchStartTime;if(e<300&&Math.abs(t)>15)this.momentum(t,e);else if(this.offset!==this.startOffset){this.duration=200;var i=this.getIndexByOffset(this.offset);this.setIndex(i,!0)}},onTransitionEnd:function(){this.stopMomentum()},onClickItem:function(t){this.duration=200,this.setIndex(t,!0)},adjustIndex:function(t){for(var e=t=Object(l.a)(t,0,this.count);e<this.count;e++)if(!v(this.options[e]))return e;for(var i=t-1;i>=0;i--)if(!v(this.options[i]))return i},getOptionText:function(t){return Object(s.e)(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){var i=this;t=this.adjustIndex(t)||0,this.offset=-t*this.itemHeight;var n=function(){t!==i.currentIndex&&(i.currentIndex=t,e&&i.$emit("change",t))};this.moving?this.transitionEndTrigger=n:n()},setValue:function(t){for(var e=this.options,i=0;i<e.length;i++)if(this.getOptionText(e[i])===t)return this.setIndex(i)},getValue:function(){return this.options[this.currentIndex]},getIndexByOffset:function(t){return Object(l.a)(Math.round(-t/this.itemHeight),0,this.count-1)},momentum:function(t,e){var i=Math.abs(t/e);t=this.offset+i/.002*(t<0?-1:1);var n=this.getIndexByOffset(t);this.duration=1e3,this.setIndex(n,!0)},stopMomentum:function(){this.moving=!1,this.duration=0,this.transitionEndTrigger&&(this.transitionEndTrigger(),this.transitionEndTrigger=null)}},render:function(t){var e=this,i=this.itemHeight,n=i*(this.visibleItemCount-1)/2,s={transform:"translate3d(0, "+(this.offset+n)+"px, 0)",transitionDuration:this.duration+"ms",transitionProperty:this.duration?"all":"none",lineHeight:i+"px"},a={height:i+"px"};return t("div",{class:[p(),this.className],on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[t("ul",{ref:"wrapper",style:s,class:p("wrapper"),on:{transitionend:this.onTransitionEnd}},[this.options.map(function(i,n){return t("li",{style:a,class:["van-ellipsis",p("item",{disabled:v(i),selected:n===e.currentIndex})],domProps:{innerHTML:e.getOptionText(i)},on:{click:function(){e.onClickItem(n)}}})})])])}}),b=Object(s.b)("picker"),w=b[0],y=b[1],x=b[2];e.a=w({props:Object(n.a)({},c.a,{defaultIndex:{type:Number,default:0},columns:{type:Array,default:function(){return[]}},toolbarPosition:{type:String,default:"top"},valueKey:{type:String,default:"text"}}),data:function(){return{children:[]}},computed:{simple:function(){return this.columns.length&&!this.columns[0].values}},watch:{columns:function(){this.setColumns()}},methods:{setColumns:function(){var t=this;(this.simple?[{values:this.columns}]:this.columns).forEach(function(e,i){t.setColumnValues(i,r(e.values))})},emit:function(t){this.simple?this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit(t,this.getValues(),this.getIndexes())},onChange:function(t){this.simple?this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit("change",this,this.getValues(),t)},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var i=this.getColumn(t);i&&i.setValue(e)},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var i=this.getColumn(t);i&&i.setIndex(e)},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var i=this.children[t];i&&JSON.stringify(i.options)!==JSON.stringify(e)&&(i.options=e,i.setIndex(0))},getValues:function(){return this.children.map(function(t){return t.getValue()})},setValues:function(t){var e=this;t.forEach(function(t,i){e.setColumnValue(i,t)})},getIndexes:function(){return this.children.map(function(t){return t.currentIndex})},setIndexes:function(t){var e=this;t.forEach(function(t,i){e.setColumnIndex(i,t)})},onConfirm:function(){this.children.map(function(t){return t.stopMomentum()}),this.emit("confirm")},onCancel:function(){this.emit("cancel")}},render:function(t){var e=this,i=this.itemHeight,n=i*this.visibleItemCount,s=this.simple?[this.columns]:this.columns,o={height:i+"px"},r={height:n+"px"},c={backgroundSize:"100% "+(n-i)/2+"px"},l=this.showToolbar&&t("div",{class:["van-hairline--top-bottom",y("toolbar")]},[this.slots()||[t("div",{attrs:{role:"button",tabindex:"0"},class:y("cancel"),on:{click:this.onCancel}},[this.cancelButtonText||x("cancel")]),this.slots("title")||this.title&&t("div",{class:["van-ellipsis",y("title")]},[this.title]),t("div",{attrs:{role:"button",tabindex:"0"},class:y("confirm"),on:{click:this.onConfirm}},[this.confirmButtonText||x("confirm")])]]);return t("div",{class:y()},["top"===this.toolbarPosition?l:t(),this.loading?t(h.a,{class:y("loading"),attrs:{color:u.a}}):t(),t("div",{class:y("columns"),style:r,on:{touchmove:a.c}},[s.map(function(i,n){return t(g,{attrs:{valueKey:e.valueKey,className:i.className,itemHeight:e.itemHeight,defaultIndex:i.defaultIndex||e.defaultIndex,visibleItemCount:e.visibleItemCount,initialOptions:e.simple?i:i.values},on:{change:function(){e.onChange(n)}}})}),t("div",{class:y("mask"),style:c}),t("div",{class:["van-hairline--top-bottom",y("frame")],style:o})]),"bottom"===this.toolbarPosition?l:t()])}})},rD0v:function(t,e,i){"use strict";var n=i("RfZZ"),s=i("o69Z"),a=Object(s.b)("swipe-item"),o=a[0],r=a[1];e.a=o({data:function(){return{offset:0}},beforeCreate:function(){this.$parent.swipes.push(this)},destroyed:function(){this.$parent.swipes.splice(this.$parent.swipes.indexOf(this),1)},render:function(t){var e=this.$parent,i=e.vertical,s=e.computedWidth,a=e.computedHeight,o={width:s+"px",height:i?a+"px":"100%",transform:"translate"+(i?"Y":"X")+"("+this.offset+"px)"};return t("div",{class:r(),style:o,on:Object(n.a)({},this.$listeners)},[this.slots()])}})}});
//# sourceMappingURL=6.b52b3ffc469172fda9db.js.map