webpackJsonp([26],{"4kfY":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});e("9++/");var s=e("QhyB"),o=(e("4yKu"),e("wolx")),i=e("mvHQ"),n=e.n(i),d=e("Xxa5"),r=e.n(d),l=e("exGp"),c=e.n(l),u=e("D6FL"),g={props:{},data:function(){return{data:[0],keyword:"",value:"",loading:!1,finished:!1,page:1,nomore:!1}},methods:{getdata:function(){var t=this;return c()(r.a.mark(function a(){var e;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(u.M)({keyword:t.keyword,page:t.page});case 2:e=a.sent,t.loading=!1,1==t.page?(t.data=e.data.goods_list.list,0==e.data.goods_list.length&&(t.finished=!0)):t.data=t.data.concat(e.data.goods_list.list),t.page++,e.data.goods_list.count<=0&&(t.finished=!0,console.log(111,e.data.goods_list.count));case 7:case"end":return a.stop()}},a,t)}))()},getsearch:function(){this.value!=this.keyword&&(this.keyword=this.value,this.getstorage(),this.finished=!1,this.page=1,this.onLoad())},getstorage:function(){var t=localStorage.getItem("key");if(t){for(var a=JSON.parse(t),e=0;e<a.length;e++)if(this.keyword==a[e])return;a.unshift(this.keyword||"全部商品"),a.length>3&&a.splice(3),localStorage.setItem("key",n()(a))}else{(a=[])[0]=this.keyword||"全部商品",localStorage.setItem("key",n()(a))}},onLoad:function(){var t=this;this.loading&&Object(u.M)({keyword:this.keyword,page:this.page}).then(function(a){t.page>1&&a.data.goods_list?t.data=t.data.concat(a.data.goods_list.list):t.data=a.data.goods_list.list,t.loading=!1,t.page++,(a.data.goods_list.count<=0||!a.data.goods_lis)&&(t.finished=!0)})}},components:{vanSearch:o.a,vanList:s.a},computed:{},created:function(){this.keyword="全部商品"==this.$route.query.keyword?"":this.$route.query.keyword,this.getstorage()},mounted:function(){}},h={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"box"}},[s("div",{staticClass:"top"},[s("van-search",{attrs:{placeholder:"请输入搜索关键词","show-action":"","left-icon":"",shape:"round"},on:{blur:t.getsearch},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}})],1),t._v(" "),s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[s("div",{staticClass:"list"},t._l(t.data,function(a,e){return s("div",{key:e,staticClass:"item",on:{click:function(e){t.$router.push({path:"/goodsDetail",query:{id:a.goods_id}})}}},[s("img",{staticClass:"img",attrs:{src:a.original_img,alt:""}}),t._v(" "),s("div",{staticClass:"right"},[s("p",{staticClass:"title"},[t._v(t._s(a.goods_name))]),t._v(" "),s("p",{staticClass:"guige"},[t._v("原价:￥"+t._s(a.shop_price))]),t._v(" "),s("div",{staticClass:"bottom"},[s("p",[t._v("会员价:"),s("span",[t._v("￥"+t._s(a.shop_price))])]),t._v(" "),s("p",[t._v("已售："+t._s(a.sales_sum)+" 件")])])])])}))]),t._v(" "),s("img",{staticClass:"cart",attrs:{src:e("uHHO"),alt:""},on:{click:function(a){t.$router.push({path:"/cart"})}}})],1)},staticRenderFns:[]};var p=e("VU/8")(g,h,!1,function(t){e("AJ+/")},"data-v-d37d4964",null);a.default=p.exports},"AJ+/":function(t,a){}});
//# sourceMappingURL=26.fec7cb4962cd1d7950c2.js.map