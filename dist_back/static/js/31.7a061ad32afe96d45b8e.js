webpackJsonp([31],{ai9K:function(t,e){},oODu:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("XmAh");var s=a("il3B"),i=(a("eqfM"),a("/QYm")),n=(a("9++/"),a("QhyB")),o=a("D6FL"),c={components:{"van-list":n.a},data:function(){return{index:0,data:[{}],list:[],loading:!1,finished:!1,type:["","WAITPAY","WAITSEND","WAITRECEIVE","FINISH"],p:1,order_type:1}},created:function(){this.index=this.$route.query.index,this.getData()},methods:{sure_order:function(t){var e=this;Object(o.Y)({order_id:t}).then(function(t){e.toggle_order(5)})},urlto:function(t,e){this.$router.push({path:"/order_detail",query:{id:e}})},tixing:function(t){ask_send_item({order_id:t}).then(function(t){Object(i.a)("提醒成功，更多帮助请联系客服")})},getData:function(){var t=this;if(this.loading){var e={};e.type=this.type[this.index],e.p=this.p,Object(o.Z)(e).then(function(e){1==t.p?t.data=e.data:t.data=t.data.concat(e.data),console.log(t.data,e.data),t.p++,t.loading=!1,t.data.length==e.count&&(console.log(t.data.length),t.finished=!0)})}},cancel:function(t,e){var a=this;s.a.confirm({title:"提示",message:"取消订单后不可恢复！"}).then(function(){var s={};s.id=t,Object(o.i)(s).then(function(t){200==t.code?(Object(i.a)("取消成功"),a.data.splice(e,1)):Object(i.a)("取消失败")})}).catch(function(){})},toggle_order:function(t){this.index=t,this.p=1,this.finished=!1,this.loading=!0,this.getData()},kefu:function(){var t=this;t.$store.state.kefu?s.a.confirm({title:t.$store.state.kefu.title,message:t.$store.state.kefu.number}).then(function(){}).catch(function(){}):Object(o.X)().then(function(e){t.$store.state.kefu=e.data,s.a.confirm({title:e.data.title,message:e.data.number}).then(function(){}).catch(function(){})})},submit:function(t){s.a.confirm({title:"提示",message:"请检查订单无误后确认！"}).then(function(){Object(o.Y)({id:t}).then(function(t){console.log(t)})}).catch(function(){})},onBridgeReady:function(t){var e=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.data.data.appId,timeStamp:t.data.data.timeStamp,nonceStr:t.data.data.nonceStr,package:t.data.data.package,signType:t.data.data.signType,paySign:t.data.data.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg&&e.$router.push({path:"/myOrder",query:{index:2}})})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"box"}},[a("div",{staticClass:"nav"},[a("span",{class:{active:0==t.index},on:{click:function(e){t.toggle_order(0)}}},[t._v("所有订单")]),t._v(" "),a("span",{class:{active:1==t.index},on:{click:function(e){t.toggle_order(1)}}},[t._v("待付款")]),t._v(" "),a("span",{class:{active:2==t.index},on:{click:function(e){t.toggle_order(2)}}},[t._v("待发货")]),t._v(" "),a("span",{class:{active:3==t.index},on:{click:function(e){t.toggle_order(3)}}},[t._v("已发货")]),t._v(" "),a("span",{class:{active:4==t.index},on:{click:function(e){t.toggle_order(4)}}},[t._v("已完成")])]),t._v(" "),a("div",{staticClass:"orderList"},[a("van-list",{attrs:{"finished-text":"没有更多了",finished:t.finished},on:{load:function(e){t.getData()}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.data,function(e,s){return a("div",{key:s,staticClass:"list"},[a("div",{staticClass:"head flex-between",staticStyle:{margin:"0 20pt"}},[a("p",{staticClass:"number"},[t._v("订单号："),a("span",[t._v(t._s(e.order_sn))])]),t._v(" "),0==e.order_status?a("p",{staticClass:"status",staticStyle:{color:"#F8900A"}},[t._v(t._s(e.order_status_detail))]):t._e(),t._v(" "),1==e.order_status?a("p",{staticClass:"status",staticStyle:{color:"#F8900A"}},[t._v(t._s(e.order_status_detail))]):t._e(),t._v(" "),2==e.order_status?a("p",{staticClass:"status",staticStyle:{color:"#F8900A"}},[t._v(t._s(e.order_status_detail))]):t._e(),t._v(" "),3==e.order_status?a("p",{staticClass:"status",staticStyle:{color:"#F8900A"}},[t._v(t._s(e.order_status_detail))]):t._e(),t._v(" "),4==e.order_status?a("p",{staticClass:"status",staticStyle:{color:"#F8900A"}},[t._v(t._s(e.order_status_detail))]):t._e()]),t._v(" "),a("div",{staticClass:"item"},[t._l(e.order_goods,function(e,s){return a("div",{key:s,attrs:{id:"flex_info"},on:{click:function(a){t.urlto(e.order_status,e.order_id)}}},[a("img",{staticClass:"img",attrs:{src:e.original_img,alt:""}}),t._v(" "),a("div",{staticClass:"flex_1"},[a("p",{staticClass:"title"},[t._v(t._s(e.goods_name))]),t._v(" "),a("p",{staticClass:"text",staticStyle:{display:"block",margin:"10pt 0"}}),t._v(" "),a("p",{staticClass:"price"},[t._v("￥"+t._s(e.goods_price)+"     "),a("span",[t._v(" x "+t._s(e.goods_num))])])])])}),t._v(" "),1==t.order_type?a("div",{staticClass:"total flex-center-y"},[t._v("\r\n                总计："),a("span",[t._v("￥"+t._s(Number(e.total_amount)))])]):t._e(),t._v(" "),a("div",{staticClass:"button flex-center-y"},[a("div",{staticClass:"border flex-center",on:{click:function(e){t.kefu()}}},[t._v("联系客服")]),t._v(" "),0==e.pay_status?a("div",{staticClass:"border flex-center",on:{click:function(a){t.cancel(e.order_id,s)}}},[t._v("取消订单")]):t._e(),t._v(" "),0==e.order_status?a("div",{staticClass:"background flex-center",on:{click:function(a){t.up_order(e.order_id)}}},[t._v("去付款")]):t._e(),t._v(" "),1==e.order_status&&1==e.shipping_status?a("div",{staticClass:"background_blue flex-center",on:{click:function(a){t.submit(e.order_id)}}},[t._v("确认收货")]):t._e()])],2)])}))],1)])},staticRenderFns:[]};var d=a("VU/8")(c,r,!1,function(t){a("ai9K")},"data-v-7f177f94",null);e.default=d.exports}});
//# sourceMappingURL=31.7a061ad32afe96d45b8e.js.map